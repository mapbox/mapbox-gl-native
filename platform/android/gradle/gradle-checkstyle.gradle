apply plugin: 'checkstyle'

checkstyle {
    toolVersion = "7.1.1" // 7.3
    configFile = "../checkstyle.xml" as File
}

task checkstyle(type: Checkstyle) {
    description 'Checks if the code adheres to coding standards'
    group 'verification'
    configFile file("../checkstyle.xml")
    source 'src'
    include '**/*.java'
    exclude '**/gen/**'                              // generated code
    exclude '**/style/*LayerTest.java'               // generated code
    exclude '**/style/LightTest.java'                // generated code
    exclude '**/style/layers/Property.java'          // generated code
    exclude '**/style/layers/PropertyFactory.java'   // generated code
    exclude '**/style/layers/*Layer.java'            // generated code
    exclude '**/style/light/Light.java'              // generated code
    exclude '**/log/LoggerDefinition.java'           // allow single character signature as v()
    exclude '**/log/Logger.java'                     // allow single character signature as v()
    exclude '**/Expression.java'                     // allow single character signature as e()
    classpath = files()
    ignoreFailures = false
}
